<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0f172a">
    <meta name="color-scheme" content="dark only">
    <title>Palavra na Testa</title>
    
    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        /* === RESET & VARS === */
        :root {
            --bg-dark: #0f172a;
            --primary: #6366f1;
            --secondary: #ec4899;
            --accent: #fbbf24;
            --success: #22c55e;
            --danger: #ef4444;
            --glass: rgba(255, 255, 255, 0.05);
            --border: 1px solid rgba(255, 255, 255, 0.1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; user-select: none; outline: none; }

        html {
            background-color: #1e1b4b;
            background-image: radial-gradient(circle at center, #2e1065 0%, #020617 100%);
            height: 100%;
        }

        body {
            width: 100vw; height: 100vh; overflow: hidden;
            font-family: 'Poppins', sans-serif; color: white;
            background: transparent;
            position: fixed; top: 0; left: 0;
        }

        /* === TELAS === */
        .screen {
            position: absolute; inset: 0;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            padding: 20px; z-index: 1; opacity: 0; transition: opacity 0.3s ease;
        }
        .screen.active { display: flex; opacity: 1; z-index: 10; }

        /* === TELA 1: SETUP === */
        #screen-setup {
            justify-content: flex-start;
            padding-top: 5vh;
            overflow-y: auto;
        }

        h1 {
            font-family: 'Montserrat', sans-serif; font-weight: 900; 
            font-size: clamp(3rem, 8vw, 5rem);
            text-transform: uppercase; margin-bottom: 40px;
            background: linear-gradient(to right, #818cf8, #f472b6);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            text-align: center; letter-spacing: -2px;
            filter: drop-shadow(0 0 20px rgba(99,102,241,0.5));
        }

        .setup-container {
            display: flex; flex-wrap: wrap; gap: 30px;
            width: 100%; max-width: 1100px;
            justify-content: center; margin-bottom: 40px;
        }

        .setup-col {
            flex: 1 1 450px;
            display: flex; flex-direction: column; gap: 25px;
        }

        .input-wrapper { display: flex; flex-direction: column; gap: 10px; }

        label {
            font-size: 1.2rem; color: #818cf8; font-weight: 800; 
            text-transform: uppercase; margin-left: 5px;
        }
        .col-pink label { color: #f472b6; }
        .col-gray label { color: #cbd5e1; }

        input {
            width: 100%; padding: 20px; 
            background: rgba(255,255,255,0.15); 
            border: none;
            color: white; border-radius: 15px; 
            font-size: 2rem; font-weight: 700; font-family: 'Montserrat';
        }
        input:focus { background: rgba(255,255,255,0.25); }

        .btn {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            color: white; border: none; border-radius: 60px;
            padding: 25px 60px; font-size: 2.5rem; font-weight: 900;
            text-transform: uppercase; letter-spacing: 2px; cursor: pointer;
            box-shadow: 0 10px 40px rgba(236, 72, 153, 0.4);
            transition: transform 0.1s; width: 100%; max-width: 500px;
            font-family: 'Montserrat', sans-serif; margin-top: 10px;
        }
        .btn:active { transform: scale(0.97); }

        /* === TELA DE JOGO === */
        #screen-game { background-color: black !important; background-image: none !important; padding: 0; }

        .timer-wrapper {
            position: absolute; top: 30px; right: 30px;
            width: 100px; height: 100px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            background: conic-gradient(var(--secondary) 0deg, #333 0deg);
            z-index: 20;
        }
        .timer-wrapper::after {
            content: ''; position: absolute; inset: 10px;
            background: black; border-radius: 50%; z-index: 1;
        }
        .timer-text { position: relative; z-index: 2; font-family: 'Montserrat'; font-size: 2.5rem; font-weight: 900; }

        #word-disp {
            font-family: 'Montserrat'; font-weight: 900; font-size: 22vmin;
            text-align: center; line-height: 0.9; text-transform: uppercase;
            color: white; width: 95%; z-index: 5;
        }

        .hud-bar {
            position: absolute; bottom: 40px; width: 90%;
            display: flex; justify-content: space-between;
            font-family: 'Montserrat'; font-weight: 800; font-size: 1.5rem;
            z-index: 10;
        }
        .hud-left { color: var(--danger); } .hud-right { color: var(--success); }

        .flash-overlay {
            position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;
            font-size: 15vmin; font-weight: 900; color: white;
            opacity: 0; pointer-events: none; z-index: 50; font-family: 'Montserrat';
        }

        .touch-zone { position: absolute; top:0; bottom:0; width: 40%; z-index: 8; }
        .tz-l { left: 0; } .tz-r { right: 0; }

        /* === ROLETA (CORRIGIDA) === */
        /* Layout dividido: Roleta Esq | Texto Dir */
        #screen-wheel { 
            flex-direction: row; 
            justify-content: center; 
            gap: 5vw; 
        }
        
        #wheel-container { 
            width: 75vmin; height: 75vmin; 
            position: relative; 
            filter: drop-shadow(0 0 30px rgba(0,0,0,0.5)); 
            flex-shrink: 0;
        }
        
        #wheel-spinner { 
            width: 100%; height: 100%; 
            border-radius: 50%; position: relative; 
            border: 6px solid white; 
            overflow: hidden; 
            /* Transform será aplicado via JS */
        }
        
        /* === CORREÇÃO DO TEXTO DA ROLETA === */
        .slice-wrapper {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0; /* Pivô zero */
            height: 0; /* Pivô zero */
            transform-origin: 0 0; /* Roda a partir do centro exato */
            pointer-events: none;
            z-index: 10;
        }
        
        .slice-text { 
            position: absolute;
            top: 0; 
            left: 0;
            transform: translateY(-50%); /* Centraliza verticalmente na linha imaginária */
            padding-left: 10vmin; /* MARGEM DO CENTRO - Empurra o texto para fora */
            font-family: 'Montserrat'; 
            font-weight: 900; 
            font-size: 3.5vmin; 
            color: white; 
            text-transform: uppercase; 
            white-space: nowrap;
            text-shadow: 0 2px 4px rgba(0,0,0,0.6);
        }
        
        #pointer { 
            position: absolute; top: -35px; left: 50%; transform: translateX(-50%); 
            width: 0; height: 0;
            border-left: 35px solid transparent; 
            border-right: 35px solid transparent; 
            border-top: 70px solid white; 
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.3));
            z-index: 20; 
        }

        /* Centro da Roleta (Círculo Branco) */
        .wheel-center-cap {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 15%; height: 15%; background: white; border-radius: 50%;
            box-shadow: 0 0 20px rgba(0,0,0,0.2); z-index: 15;
        }

        .wheel-info { 
            display: flex; flex-direction: column; 
            align-items: flex-start; /* Alinhado à esquerda do bloco da direita */
            justify-content: center;
            text-align: left;
            min-width: 300px;
        }

        /* === RESULTADOS === */
        #screen-res, #screen-final { background: #1e1b4b; }

        /* === BLOQUEIO PORTRAIT === */
        #lock { position: fixed; inset: 0; background: #020617; z-index: 9999; display: none; flex-direction: column; align-items: center; justify-content: center; color: white; }
        @media screen and (orientation: portrait) {
            #lock { display: flex; }
            .screen { display: none !important; }
            #screen-setup.active { display: flex !important; }
            #screen-setup.active ~ #lock { display: none; }
        }
        @media (max-width: 900px) {
            #screen-wheel { flex-direction: column; gap: 20px; }
            .wheel-info { align-items: center; text-align: center; }
            .setup-col { flex: 1 1 100%; }
            h1 { font-size: 3rem; margin-bottom: 20px; }
        }
    </style>
</head>
<body>

    <!-- AUDIO -->
    <audio id="snd-click" src="https://assets.mixkit.co/sfx/preview/mixkit-ui-click-2432.mp3"></audio>
    <audio id="snd-spin" src="https://assets.mixkit.co/sfx/preview/mixkit-foley-tire-rolling-looped-1681.mp3" loop></audio>
    <audio id="snd-win" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>
    <audio id="snd-ok" src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3"></audio>
    <audio id="snd-pass" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3"></audio>

    <!-- LOCK -->
    <div id="lock">
        <svg width="80" height="80" viewBox="0 0 24 24" fill="white"><path d="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"/></svg>
        <h2 style="margin-top:20px">GIRE A TELA</h2>
    </div>

    <!-- HOME -->
    <div style="position:absolute; top:20px; left:20px; z-index:100; cursor:pointer; opacity:0.5" onclick="if(confirm('Voltar ao menu?')) location.reload()">
        <svg width="30" height="30" viewBox="0 0 24 24" fill="white"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
    </div>

    <!-- 1. SETUP -->
    <div id="screen-setup" class="screen active">
        <h1>PALAVRA NA TESTA</h1>
        
        <div class="setup-container">
            <div class="setup-col col-blue">
                <div class="input-wrapper">
                    <label>TIME AZUL</label>
                    <input type="text" id="t1" value="Time Azul" style="background:#6b7280;">
                </div>
            </div>
            <div class="setup-col col-gray">
                <div class="input-wrapper">
                    <label>TEMPO (SEGUNDOS)</label>
                    <input type="number" id="time" value="60" style="background:#6b7280;">
                </div>
            </div>
            <div class="setup-col col-pink">
                <div class="input-wrapper">
                    <label>TIME ROSA</label>
                    <input type="text" id="t2" value="Time Rosa" style="background:#6b7280;">
                </div>
            </div>
            <div class="setup-col col-gray">
                <div class="input-wrapper">
                    <label>RODADAS</label>
                    <input type="number" id="rounds" value="3" style="background:#6b7280;">
                </div>
            </div>
        </div>

        <button class="btn" onclick="app.start()">JOGAR</button>
    </div>

    <!-- 2. INTRO -->
    <div id="screen-intro" class="screen">
        <h2 style="opacity:0.6; font-size: 2rem;">RODADA <span id="lbl-rd">1</span></h2>
        <h1 id="lbl-tm" style="font-size: 5rem; margin: 20px 0;">TIME</h1>
        <button class="btn" style="width: auto; margin-top: 30px;" onclick="app.toWheel()">GIRAR ROLETA</button>
    </div>

    <!-- 3. ROLETA -->
    <div id="screen-wheel" class="screen">
        <div id="wheel-container">
            <div id="pointer"></div>
            <div id="wheel-spinner"></div>
            <div class="wheel-center-cap"></div>
        </div>
        
        <div class="wheel-info">
            <h3 style="color: #fbbf24; font-size: 1.5rem; text-transform: uppercase; margin-bottom: 10px;">Categoria</h3>
            <div id="res-cat" style="font-size: 4rem; font-weight: 900; margin-bottom: 20px; color: #22c55e; text-transform: uppercase;">AÇÕES</div>
            <button id="btn-go" class="btn" onclick="game.pre()">COMEÇAR</button>
        </div>
    </div>

    <!-- 4. GAME -->
    <div id="screen-game" class="screen">
        <div class="timer-wrapper">
            <div class="timer-text" id="timer-num">60</div>
        </div>

        <div id="word-disp">PALAVRA</div>
        
        <div class="hud-bar">
            <div class="hud-left">▼ BAIXO: PULAR</div>
            <div class="hud-right">▲ CIMA: ACERTOU</div>
        </div>

        <div class="touch-zone tz-l" onclick="game.act(false)"></div>
        <div class="touch-zone tz-r" onclick="game.act(true)"></div>
        
        <div id="fb-ok" class="flash-overlay" style="background: rgba(34, 197, 94, 0.9);">ACERTOU!</div>
        <div id="fb-no" class="flash-overlay" style="background: rgba(239, 68, 68, 0.9);">PULOU!</div>
    </div>

    <!-- 5. RESULTS -->
    <div id="screen-res" class="screen">
        <h2 style="color:var(--success)">FIM DA RODADA</h2>
        <div id="res-score" style="font-size: 6rem; font-weight: 900; margin: 20px 0;">0</div>
        <div id="res-list" style="width:100%; max-width:600px; height:30vh; overflow-y:auto; background:rgba(255,255,255,0.1); border-radius:15px; padding:15px;"></div>
        <button class="btn" style="width:auto; margin-top:20px" onclick="app.next()">PRÓXIMO</button>
    </div>

    <!-- 6. FINAL -->
    <div id="screen-final" class="screen">
        <h1>FIM DE JOGO</h1>
        <div style="display:flex; gap:30px; margin: 30px 0; flex-wrap: wrap; justify-content: center;">
            <div style="text-align:center; background:rgba(255,255,255,0.1); padding:20px; border-radius:20px; min-width:200px">
                <div id="fn-1" style="color:#818cf8; font-weight:bold; font-size: 1.5rem">Azul</div>
                <div id="fs-1" style="font-size:4rem; font-weight:900">0</div>
            </div>
            <div style="text-align:center; background:rgba(255,255,255,0.1); padding:20px; border-radius:20px; min-width:200px">
                <div id="fn-2" style="color:#f472b6; font-weight:bold; font-size: 1.5rem">Rosa</div>
                <div id="fs-2" style="font-size:4rem; font-weight:900">0</div>
            </div>
        </div>
        <h2 id="winner" style="color:var(--accent); font-size: 2rem;">VENCEDOR</h2>
        <button class="btn" style="width:auto; margin-top: 20px;" onclick="location.reload()">MENU PRINCIPAL</button>
    </div>

    <script>
        const CATS = [
            {n:"ANIMAIS", c:"#10b981", w:["Gato","Cachorro","Elefante","Girafa","Leão","Tubarão","Panda","Zebra","Macaco"]},
            {n:"FILMES", c:"#3b82f6", w:["Titanic","Avatar","Shrek","Matrix","Barbie","Batman","Frozen","Vingadores","Coringa"]},
            {n:"OBJETOS", c:"#f59e0b", w:["Mesa","Cadeira","Celular","Espelho","Sofá","Copo","Relógio","Sapato","Computador"]},
            {n:"AÇÕES", c:"#ef4444", w:["Correr","Dançar","Nadar","Dormir","Comer","Beijar","Gritar","Chorar","Pular"]},
            {n:"FAMOSOS", c:"#8b5cf6", w:["Neymar","Anitta","Messi","Beyoncé","Xuxa","Pelé","Madonna","Silvio Santos"]},
            {n:"LUGARES", c:"#ec4899", w:["Praia","Escola","Shopping","Cinema","Hospital","Igreja","Parque","Banco"]}
        ];

        const aud = { p:(i)=>{document.getElementById('snd-'+i).play().catch(()=>{})}, l:(i,o)=>{const a=document.getElementById('snd-'+i); o?a.play().catch(()=>{}):a.pause()} };
        const st = { t:[{n:"",s:0,c:"#6366f1"},{n:"",s:0,c:"#ec4899"}], cfg:{t:60,r:3}, rd:1, trn:0, cat:null, q:[], h:[], pts:0, on:false };

        const sensor = {
            z: 0, wait: false,
            init: () => {
                if (window.DeviceMotionEvent) {
                    window.addEventListener('devicemotion', sensor.handle);
                    if (typeof DeviceMotionEvent.requestPermission === 'function') {
                         // iOS request logic if needed later
                    }
                }
            },
            handle: (e) => {
                const acc = e.accelerationIncludingGravity;
                if (!acc) return;
                sensor.z = acc.z || 0;
                // 9.8 (teto) vs -9.8 (chão)
                if (st.on && !sensor.wait) {
                    if (sensor.z > 7.0) { game.act(true); sensor.pause(); }
                    else if (sensor.z < -7.0) { game.act(false); sensor.pause(); }
                }
            },
            pause: () => { sensor.wait = true; setTimeout(() => sensor.wait = false, 1500); }
        };
        sensor.init();

        const app = {
            to: (id) => {
                document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
                document.getElementById('screen-'+id).classList.add('active');
            },
            start: () => {
                aud.p('click');
                if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {
                    DeviceMotionEvent.requestPermission().then(r=>{ if(r!=='granted') alert('Permissão negada!'); }).catch(e=>{});
                }
                st.t[0].n = document.getElementById('t1').value;
                st.t[1].n = document.getElementById('t2').value;
                st.cfg.t = parseInt(document.getElementById('time').value);
                st.cfg.r = parseInt(document.getElementById('rounds').value);
                app.prep();
            },
            prep: () => {
                if(st.rd > st.cfg.r) { app.end(); return; }
                const t = st.t[st.trn];
                document.getElementById('lbl-rd').innerText = st.rd;
                document.getElementById('lbl-tm').innerText = t.n;
                document.getElementById('lbl-tm').style.color = t.c;
                app.to('intro');
            },
            toWheel: () => { aud.p('click'); wheel.rst(); app.to('wheel'); },
            next: () => { aud.p('click'); st.trn++; if(st.trn>1){st.trn=0; st.rd++} app.prep(); },
            end: () => {
                const t1=st.t[0], t2=st.t[1];
                document.getElementById('fn-1').innerText=t1.n; document.getElementById('fs-1').innerText=t1.s;
                document.getElementById('fn-2').innerText=t2.n; document.getElementById('fs-2').innerText=t2.s;
                const w=document.getElementById('winner');
                if(t1.s>t2.s) {w.innerText=t1.n+" VENCEU!"; w.style.color=t1.c;}
                else if(t2.s>t1.s) {w.innerText=t2.n+" VENCEU!"; w.style.color=t2.c;}
                else {w.innerText="EMPATE"; w.style.color="white";}
                aud.p('win'); app.to('final');
            }
        };

        const wheel = {
            el: document.getElementById('wheel-spinner'),
            ang: 0, spin: false, velocity: 0, lastY: 0, lastTime: 0,
            rst: () => {
                wheel.spin=false; document.getElementById('btn-go').style.display='none'; 
                document.getElementById('res-cat').style.opacity=0;
                
                let g="conic-gradient(", h=""; const sl=360/CATS.length;
                CATS.forEach((c,i)=>{
                    g+=`${c.c} ${i*sl}deg ${(i+1)*sl}deg,`;
                    const mid = i*sl + sl/2;
                    h+=`<div class="slice-wrapper" style="transform:rotate(${mid}deg)"><span class="slice-text">${c.n}</span></div>`;
                });
                wheel.el.style.background=g.slice(0,-1)+")"; wheel.el.innerHTML=h;
                
                // Physics Touch Logic
                const w=document.getElementById('wheel-container'); 
                
                const trackMove = (y) => {
                    const now = Date.now();
                    const deltaY = y - wheel.lastY;
                    const deltaTime = now - wheel.lastTime;
                    
                    // Calculate speed (pixels per ms) -> convert to degrees roughly
                    // Simple delta is enough for direct tracking
                    wheel.ang += deltaY * 0.8; 
                    wheel.el.style.transform = `rotate(${wheel.ang}deg)`;
                    
                    // Store velocity for release (degrees per ms approx)
                    if (deltaTime > 0) {
                         wheel.velocity = (deltaY / deltaTime) * 15; // multiplier for feel
                    }
                    
                    wheel.lastY = y;
                    wheel.lastTime = now;
                };

                const startDrag = (y) => {
                    if (wheel.spin) return;
                    wheel.lastY = y;
                    wheel.lastTime = Date.now();
                    wheel.velocity = 0;
                };

                const endDrag = () => {
                    if (wheel.spin) return;
                    // If dragged with speed, spin
                    if (Math.abs(wheel.velocity) > 0.5) {
                        wheel.go(wheel.velocity);
                    }
                };

                // Touch Events
                w.ontouchstart = e => startDrag(e.touches[0].clientY);
                w.ontouchmove = e => { e.preventDefault(); trackMove(e.touches[0].clientY); };
                w.ontouchend = endDrag;

                // Mouse Events
                w.onmousedown = e => { startDrag(e.clientY); w.onmousemove = ev => trackMove(ev.clientY); };
                window.onmouseup = () => { w.onmousemove = null; endDrag(); };
            },
            go: (initialVel) => {
                wheel.spin = true; 
                aud.l('spin', true);
                let v = initialVel || 20;
                
                // Cap max speed
                if (v > 40) v = 40;
                if (v < -40) v = -40;
                // Ensure min speed for gameplay if tapped lightly
                if (Math.abs(v) < 5) v = 10 * (Math.random() < 0.5 ? -1 : 1);

                const loop = () => {
                    if (!wheel.spin) return;
                    v *= 0.98; // Friction
                    wheel.ang += v;
                    wheel.el.style.transform = `rotate(${wheel.ang}deg)`;
                    
                    if (Math.abs(v) < 0.1) {
                        wheel.spin = false; 
                        aud.l('spin', false);
                        // Calculate Result
                        const norm = (wheel.ang % 360 + 360) % 360; // 0-360
                        // Pointer is at top (0 deg). Conic gradient starts at 0 deg (Top).
                        // The slice at Top is the one where the angle is (360 - rotation)
                        const winAngle = (360 - norm) % 360;
                        const sliceSize = 360 / CATS.length;
                        const idx = Math.floor(winAngle / sliceSize);
                        
                        st.cat = CATS[idx];
                        const el = document.getElementById('res-cat');
                        el.innerText = st.cat.n; 
                        el.style.color = st.cat.c; 
                        el.style.opacity = 1;
                        aud.p('win'); 
                        document.getElementById('btn-go').style.display = 'inline-block';
                    } else {
                        requestAnimationFrame(loop);
                    }
                }
                loop();
            }
        };

        const game = {
            tmr: null,
            pre: () => {
                app.to('game'); const d=document.getElementById('word-disp'); let c=3; d.innerText=c; 
                const i=setInterval(()=>{ c--; if(c>0) d.innerText=c; else { clearInterval(i); d.innerText="VAI!"; setTimeout(game.run, 600); } },1000);
            },
            run: () => {
                st.on=true; st.pts=0; st.h=[]; st.q=[...st.cat.w].sort(()=>Math.random()-0.5);
                game.next();
                let totalT = st.cfg.t; let t = totalT;
                const tn = document.getElementById('timer-num');
                const tw = document.querySelector('.timer-wrapper');
                
                game.tmr = setInterval(()=>{
                    t--; tn.innerText = t;
                    const pct = ((totalT - t) / totalT) * 360;
                    tw.style.background = `conic-gradient(var(--secondary) ${pct}deg, #333 ${pct}deg)`;
                    if(t<=0) game.end();
                },1000);
            },
            next: () => {
                if(st.q.length==0){game.end(); return;} st.cw=st.q.pop();
                document.getElementById('word-disp').innerText=st.cw;
            },
            act: (win) => {
                if(!st.on) return;
                if(win){ aud.p('ok'); st.pts++; st.h.push({w:st.cw,ok:true}); game.flash('fb-ok'); }
                else { aud.p('pass'); st.h.push({w:st.cw,ok:false}); game.flash('fb-no'); }
                game.next();
            },
            flash: (id) => { const e=document.getElementById(id); e.style.opacity=1; setTimeout(()=>e.style.opacity=0,600); },
            end: () => {
                st.on=false; clearInterval(game.tmr);
                st.t[st.trn].s += st.pts; document.getElementById('res-score').innerText=st.pts;
                const l=document.getElementById('res-list'); l.innerHTML="";
                st.h.forEach(x=>{
                    const d=document.createElement('div');
                    d.innerHTML=`<b style="color:${x.ok?'#22c55e':'#ef4444'}">${x.ok?'✓':'✗'}</b> ${x.w}`;
                    d.style.padding="10px"; d.style.borderBottom="1px solid rgba(255,255,255,0.1)"; l.appendChild(d);
                });
                app.to('res');
            }
        };
    </script>
</body>
</html>
